# 温度动态折线图应用 (SCIP App)
# Self-developed implant format Conversion and Interactive Plotting

这是一个基于R Shiny开发的温度数据可视化应用，用于分析和展示时间序列温度数据，特别适用于展示昼夜节律相关的温度变化。

## 功能特点

### 1. 数据导入与导出
- 支持导入CSV格式的温度数据
- 自动检测并处理不同格式的时间戳（支持"RealTime"列或"Date"+"Time"列）
- 可保存处理后的数据为CSV文件
- 支持将图表保存为PNG图片

### 2. 数据可视化
- 响应式温度曲线图
- 光照周期背景色区分（浅色表示光照期，深色表示黑暗期）
- 支持跨午夜的光照周期设置
- 可自定义图表标题、X轴和Y轴范围

### 3. 交互式功能
- 动态时间范围选择
- 自动检测并显示数据的时间范围
- 支持自定义光照周期设置
- 响应式UI，根据数据自动更新控件状态

## 使用说明

### 安装依赖

在R中运行以下命令安装所需包：

```r
install.packages(c("shiny", "ggplot2", "tools"))
```

### 运行应用

1. 打开RStudio
2. 打开 `SCIP_appV2.R` 文件
3. 点击 "Run App" 按钮或运行以下命令：

```r
shiny::runApp("SCIP_appV2.R")
```

应用将在默认浏览器中打开。

## 界面说明

### 左侧面板 - 控制区

#### 1. 文件操作
- **选择CSV文件**：上传包含温度数据的CSV文件
- **保存新文件名**：设置处理后数据的保存文件名（如：newdata.csv）
- **保存格式化文件**：将处理后的数据保存为CSV文件

#### 2. 图片保存
- **PNG图片保存路径**：设置图片保存的目录路径
- **保存图片文件名**：设置保存的图片文件名（如：plot.png）
- **保存当前图片为PNG**：将当前图表保存为PNG格式

#### 3. 图表设置
- **图片标题**：自定义图表的标题
- **开灯时间**：设置光照开始时间（格式：HH:MM:SS）
- **关灯时间**：设置光照结束时间（格式：HH:MM:SS）

#### 4. 时间范围控制
- **起始时间**：设置数据显示的起始时间（格式：YYYY-MM-DD HH:MM）
- **终止时间**：设置数据显示的结束时间（格式：YYYY-MM-DD HH:MM）
- X轴和Y轴范围：自动根据数据范围调整，也可手动设置

### 主面板 - 温度曲线图

- 显示温度随时间变化的折线图
- X轴表示时间，Y轴表示温度值
- 光照周期用灰色背景表示（光照期为浅灰色，黑暗期为深灰色）
- 自动调整时间刻度和标签格式
- 响应式设计，适应不同窗口大小

## 输入文件格式要求

### CSV文件格式
- 必须包含时间戳列（支持以下格式之一）：
  - 单列 "RealTime"（格式：YYYY/MM/DD HH:MM:SS）
  - 或两列 "Date" 和 "Time"（格式：Date=YYYY/MM/DD, Time=HH:MM:SS）
- 温度数据列：
  - 可以包含多个温度数据列，每列代表一个测量点的温度数据
  - 列名将自动用作图例标签

## 注意事项

1. 确保CSV文件使用正确的编码（推荐UTF-8）
2. 日期时间格式必须正确，否则可能导致解析错误
3. 光照周期设置会自动处理跨午夜的情况
4. 保存文件时请确保有写入权限
5. 图片保存路径必须存在，否则会保存失败

## 常见问题

1. **时间格式错误**
   - 确保时间格式为 "YYYY/MM/DD HH:MM:SS" 或分开的日期和时间列
   
2. **图表未更新**
   - 检查时间范围设置是否有效
   - 确保CSV文件已正确加载
   
3. **保存失败**
   - 检查保存路径是否存在
   - 确保有写入权限
   - 文件名不要包含特殊字符

## 版本信息

- 版本：2.0
- 最后更新：2025-06-16
- 依赖：R (≥3.6.0), shiny (≥1.7.0), ggplot2 (≥3.3.0), tools (≥3.6.0)

## 许可证

MIT License
